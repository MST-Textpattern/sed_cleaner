h1. sed_cleaner

A plugin for "Textpattern":http://textpattern.com.


h2. Description...

Designed to do a little cleanup in *new* textpattern installations. Note the *new* in that statement.
It can also automatically install plugins that you might have included in your installations @files@ directory.


h2. Primary Targets...

When enabled, this plugin will terminate the following with extreme prejudice...

* Comments
* Links
* Images
* Categories (of all types)
* Articles
* Files
* Any additional table's content you've scripted in your optional @cleanups.php@ file.

*Do not use this plugin in existing installations with any content you wish to keep.*


h2. Secondary Targets...

In addition, this plugin will adjust a few preferences...

* The default custom fields are removed
* The site slogan is blanked
* DNS and spam lookups are turned off
* Email addresses are hidden in comments
* Any preference you've scripted in your optional @cleanups.php@ file

h2. Filesystem Targets...

Where filesystem permissions allow the plugin will...

* Remove the setup directory
* Remove the contents of the @files@ directory (in case you used a cleanups file or autoloaded plugins -- see later)
* Any directory you've scripted in your optional @cleanups.php@ file


h2. Final Target...

After searching out all the above sed_cleaner will self-terminate.


h2. Installation...

# Either compile the plugin or "download it.":https://gist.github.com/1114938
# In your new installation, go to @admin > plugins@ and upload the plugin
# Optionally upload a customised @cleanups.php@ script to the site's @files@ directory (either via ftp or textpattern's @content > files@ tab.)
# Optionally upload the compiled plugin files you wish to have autoinstalled into the site's @files@ directory. This is best done via ftp but can also be done via textpattern's @content > files@ tab.
# Enable the plugin
# Navigate to any other admin side tab

Your content -- and the plugin itself -- should now be gone. Whilst all the settings you defined should now be set and any plugins you defined, loaded.


h2(#cleanups). The cleanups.php file...

This optional file allows you to define additional custom actions to be taken by sed_cleaner.

You can customise the cleanup actions to be taken by editing the file. Once you're happy with your cleanups file you should upload it to your site's @files@ directory. If sed_cleaner finds this "scripting" file it will attempt to perform the additional cleanup actions defined in it.

h3. Syntax...

|_. Command |_. Purpose |_. Arguments |_. Examples |
|^. @setpref@ |^. Sets the named preference to the given value. |^. The name of the preference, followed by the value in double quotes. |^. @'setpref dateformat "%Y-%m-%d %H:%M"'@ |
|^. @truncate@ |^. Resets the named table. |^. The name of the table to reset. |^. @'truncate txp_discuss_ipban'@ |
|^. @removedir@ |^. Removes the named directory (non recursive) relative to the textpattern directory |^. The directory to be removed. |^. @'removedir ../rpc'@ |
|^. @enableplugin@ |^. Enables the named plugin (if installed) |^. The plugin to be enabled. |^. @'enableplugin smd_admin_themes'@ |
|^. @disableplugin@ |^. Disables the named plugin (if installed) |^. The plugin to be disabled. |^. @'disableplugin smd_admin_themes'@ |


Please study the packaged cleanups.php file for more examples.

h2. License...

GPLv2

